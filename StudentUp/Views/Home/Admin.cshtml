@using StudentUp.Models;

@{
    ViewBag.Title = "Admin";
    Layout = "~/Views/MasterPages/HomeMasterPage.cshtml";
    DB db = new DB();
    DB.ResponseTable resultResponseTable;
    DB.ResponseTable department = ViewData["departments"] as DB.ResponseTable;
    string[] typeEnum;
}

@section Title{
StudentUp - Add
}

@section Style{
    <link href="~/CSS/Admin.css" rel="stylesheet" type="text/css" />
}

<div class="messages">
    @{
        Messages messages = TempData["messages"] as Messages;
        if (messages != null)
        {
            foreach (Messages.Message item in messages)
            {
        <h3 style="color: @(item.Type == Messages.Message.TypeMessage.error ? "red" : "black");">@item.Value</h3>
            }
        }
    }
</div>

<label for="group">
    Group
</label>
<input id="group" type="radio" name="typeAdd" value="group" checked="checked" />
<br />

<label for="student">
    Student
</label>
<input id="student" type="radio" name="typeAdd" value="student" />
<br />

<label for="lecturer">
    Lecturer
</label>
<input id="lecturer" type="radio" name="typeAdd" value="lecturer" />
<br />

<label for="subject">
    Subject
</label>
<input id="subject" type="radio" name="typeAdd" value="subject" />
<br />

<label for="studentSubject">
    Set subject for student
</label>
<input id="studentSubject" type="radio" name="typeAdd" value="subject" />
<br />

<div id="addGroup">
    <form action="/AddGroup" method="POST" accept-charset="utf-8">
        <input type="text" placeholder="Name" name="name" />
        <select name="department">
            @{
                department.GoToStatrTable();
                while (department.Read())
                {
                <option value="@department["Department_id"]">@department["Name"]</option>
                }
            }
        </select>
        <input type="submit" value="ADD" name="ADD" />
    </form>
    <p>Или вы можете добавить сразу всех студентов загрузив файл с ними. Такое добовление возможно только для первокурсников!!!</p>
    <p>Файл должен быть формата .xlsx (Excel) и иметь следующую структуру: (Столбци выделенные красным фоном должны быть обязательно заполнены. Очередность столбцов не изменна. Первый столбец овязательно в столбце А)</p>
    <img src="~/Images/sample_file_with_students.PNG" />
    <form action="/AddGroupAndStudent" method="POST" accept-charset="utf-8" enctype="multipart/form-data">
        <input type="text" placeholder="Name" name="name" />
        <select name="department">
            @{
                department.GoToStatrTable();
                while (department.Read())
                {
                <option value="@department["Department_id"]">@department["Name"]</option>
                }
            }
        </select>
        <input type="file" name="fileStudent" />
        <input type="submit" value="ADD" name="ADD" />
    </form>
</div>

<div id="addLecturer">
    <form action="/AddLecturer" method="POST" accept-charset="utf-8">
        <input type="text" name="surname" placeholder="Surname" />
        <input type="text" name="name" placeholder="Name" />
        <input type="text" name="secondName" placeholder="Secon name" />
        <input type="text" name="email" placeholder="Email" />
        <label>
            Admin
        <input type="checkbox" name="admin" />
        </label>
        <br />
        <input type="text" name="position" placeholder="Position" />
        <input type="text" name="telephone" placeholder="Telephone" />
        <select name="department">
            @{
                department.GoToStatrTable();
                while (department.Read())
                {
                <option value="@department["Department_id"]">@department["Name"]</option>
                }
            }
        </select>
        <input type="submit" value="ADD" name="ADD" />
    </form>
</div>

<div id="addStudent">
    <form action="/AddStudent" method="POST" accept-charset="utf-8">
        <input type="text" name="surname" placeholder="Surname" />
        <input type="text" name="name" placeholder="Name" />
        <input type="text" name="secondName" placeholder="Secon name" />
        <input type="text" name="email" placeholder="Email" />
        <label>
            Admin
        <input type="checkbox" name="admin" />
        </label>
        <br />
        <input type="text" name="telephone" placeholder="Telephone" />
        <select name="group">
            @{
                resultResponseTable = ViewData["groups"] as DB.ResponseTable;
                while (resultResponseTable != null && resultResponseTable.Read())
                {
                <option value="@resultResponseTable["Group_id"]">@resultResponseTable["Name"]</option>
                }
            }
        </select>
        <input type="text" name="currentSemestr" placeholder="Current semestr" />
        <input type="text" name="address" placeholder="Address" />
        <input type="text" name="recordBook" placeholder="Record book" />
        <select name="typeOfEducation">
            @{
                typeEnum = ViewData["typeEducation"] as string[];
                foreach (string item in typeEnum)
                {
                <option value="@item">@item</option>
                }
            }
        </select>
        <input type="text" name="contactsParents" placeholder="Сontacts parents" />
        <input type="text" name="employmentInTheDepartment" placeholder="Employment in the department" />
        <input type="submit" value="ADD" name="ADD" />
    </form>
</div>

<div id="addSubject">
    <form action="/AddSubject" method="POST" accept-charset="utf-8">
        <input type="text" name="name" placeholder="Name subject" />
        <select name="lecturer">
            @{
                resultResponseTable = ViewData["lecturers"] as DB.ResponseTable;
                while (resultResponseTable != null && resultResponseTable.Read())
                {
                <option value="@resultResponseTable["Lecturer_id"]">@resultResponseTable["Surname"] @resultResponseTable["Name"] @resultResponseTable["Second_name"]</option>
                }
            }
        </select>
        <select name="examType">
            @{
                typeEnum = ViewData["examType"] as string[];
                foreach (string item in typeEnum)
                {
                <option value="@item">@item</option>
                }
            }
        </select>
        <input type="submit" value="ADD" name="ADD" />
    </form>
</div>

<div id="setSubjectForStudent">
    <form action="/SetSubjectForStudent" method="POST" accept-charset="utf-8">
        <select name="subjectID">
            @{
                resultResponseTable = ViewData["subjects"] as DB.ResponseTable;
                while (resultResponseTable != null && resultResponseTable.Read())
                {
                <option value="@resultResponseTable["Subject_id"]">@resultResponseTable["Name"]</option>
                }
            }
        </select>
        <select name="students" multiple="multiple">
            @{
                resultResponseTable = ViewData["students"] as DB.ResponseTable;
                while (resultResponseTable != null && resultResponseTable.Read())
                {
                <option value="@resultResponseTable["Student_id"]">@resultResponseTable["Surname"] @resultResponseTable["Name"] @resultResponseTable["Second_name"]</option>
                }
            }
        </select>
        <input type="submit" value="SET" name="SET" />
    </form>
</div>

@section Script{
}